<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Breakdown</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;400;600;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link href="slaughdr-main.css" rel="stylesheet">
    <style>
        .title-font {
            font-family: var(--font-heading);
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            text-align: center;
            font-weight: 400;
            font-size: 0.9rem;
            letter-spacing: 0.02em;
        }

        .description-card {
            display: flex;
            flex-direction: row;
            /* Text + photo side by side */
            align-items: flex-start;
            justify-content: flex-start;
            background: rgba(255, 255, 255, 0.02);
            padding: 18px;
            border-radius: 14px;
            width: 100%;
            max-width: 700px;
            text-align: left;
            gap: 20px;
            overflow: hidden;
            transition: all 0.35s ease;
            cursor: pointer;
        }

        .description-text {
            flex: 1;
            /* Take remaining space */
            font-size: 1.05rem;
            margin: 0;
            color: #fff;
            letter-spacing: 0.05em;
        }

        .description-photo {
            width: 0;
            /* Start hidden */
            overflow: hidden;
            opacity: 0;
            /* Invisible initially */
            transition: all 0.35s ease;
        }

        .description-photo img {
            max-width: 200px;
            height: auto;
            border-radius: 12px;
        }

        .description-card:hover {
            max-width: 900px;
            /* Expand the card */
            background: rgba(255, 255, 255, 0.06);
        }

        .description-card:hover .description-photo {
            width: 200px;
            /* Show the photo */
            opacity: 1;
        }

        .budget-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            /* Item wider, numbers narrower */
            gap: 12px;
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            max-width: 900px;
            margin: 0 auto;
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
        }

        .budget-header {
            font-weight: 700;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 8px;
        }

        .budget-grid>div {
            padding: 8px 4px;
        }

        .budget-grid>div:nth-child(5n+1) {
            font-weight: 500;
        }

        .budget-grid>div:nth-child(5n+0) {
            text-align: right;
        }

        /* Optional: hover effect for rows */
        .budget-grid>div:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .hover-slider {
            max-width: 600px;
            margin: 40px auto;
            text-align: center;
        }

        .slider-image {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.03);
        }

        .slider-image img {
            width: 100%;
            height: 320px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        /* Overlay text */
        .slider-overlay {
            position: absolute;
            inset: 0;
            background: rgba(10, 10, 15, 0.7);
            color: #fff;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: opacity 0.4s ease;
        }

        .slider-image:hover img {
            transform: scale(1.05);
        }

        .slider-image:hover .slider-overlay {
            opacity: 1;
        }

        .slider-overlay h3 {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 10px;
        }

        .slider-overlay p {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.95rem;
            max-width: 80%;
        }

        /* Controls */
        .slider-controls {
            margin-top: 14px;
        }

        .slider-controls button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 16px;
            margin: 0 6px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .slider-controls button:hover {
            background: rgba(255, 255, 255, 0.25);
        }


        @media (max-width: 900px) {
            .description-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }

            .description-card {
                height: auto;
            }

            .description-bio {
                max-height: none;
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <section class="content-section section-gradient" id="about">
        <div class="full-width-center">
            <h2 class="section-title">System Overview</h2>
            <p style="text-align: center; color: rgba(255,255,255,0.85); font-family:'Space Grotesk', sans-serif;">
                This project stems from the idea of getting better camera angles for live streams or videos. Our goal
                was to make a functional drone from scratch which could be controlled with a simple remote control but
                also work autonomously by tracking a designated face and autonomously pathing to keep this designated
                person’s face in frame at all times. We wanted this drone to be able to be completely autonomous as its
                own entity which is why we installed a Nvidia Jetson for onboard computing processes. Our motivations
                include our passion for drones and videography as well as wanting to work on something that is
                challenging. We were searching for a project to do that could implement computer vision, as it is a
                field we are all interested in. Integrating cv in a drone was a good challenge for our team with
                extensive real-world applications, including humanitarian demining. Additionally, we hope this project
                can be used by filmmakers to vlog and record without needing drone pilots.
            </p>
            <br>
        </div>

        <!-- <div id="three-scroll-container" style="position: relative; height: 800vh;">
    
    <div class="three-sticky-wrapper">
        <canvas id="three"></canvas>
        
        <div id="story">
            <div class="info-panel pixhawk" data-start="0.05" data-end="0.15">
                <h1>Pixhawk</h1>
                <p>Using Mission Planner, we loaded Ardupilot firmware which communicates with our flight controller and Jetson.</p>
            </div>
            <div class="info-panel jetson" data-start="0.18" data-end="0.28">
                <h1>Nvidia</h1>
                <p>The brain of our drone. It hosts all the software and firmware for computer vision.</p>
            </div>
            <div class="info-panel camera" data-start="0.31" data-end="0.41">
                <h1>IMX219 Camera</h1>
                <p>Connected directly to our Jetson, this allows us to view users and control the drone autonomously.</p>
            </div>
            <div class="info-panel vents" data-start="0.45" data-end="0.55">
                <h1>Cooling Vents</h1>
                <p>Strategic vents ensure the electrical components inside do not overheat.</p>
            </div>
            <div class="info-panel landing-gear" data-start="0.60" data-end="0.70">
                <h1>Landing Gear</h1>
                <p>Designed to protect the drone from impact when falling.</p>
            </div>
            <div class="info-panel motors" data-start="0.75" data-end="0.90">
                <h1>Propellers and Motors</h1>
                <p>Two counterclockwise and two clockwise motors and propellers.</p>
            </div>
        </div>
    </div>
</div>
    <div class="scroll-spacer" style="height: 800vh;"></div>
</div> -->

        <h2>System and Energy Diagram</h2>
        <h2 class="section-title">Design Decisions</h2>

        <div class="hover-slider">
            <div class="slider-image">
                <img id="sliderImg" src="images/coffinparts.png" alt="Slide">
                <div class="slider-overlay">
                    <h3 id="sliderTitle">Drone Design</h3>
                    <p id="sliderText">We decided on the shape of the drone early into the design process. We knew it
                        would have to be big enough to house the Nvidia Jetson since we wanted the high processing
                        power. After some sketches we decided on a quadcopter with a coffin shape as that design could
                        balance out the center of mass and efficiently house all our electronics. The drones max weight
                        is 2.4kg so we designed the drone chassis to pack each component inside with minimum extraneous
                        space, which meant that wire management was difficult as we had little tolerance for wires
                        lengths. The battery resides underneath the drone for weight balance and easy access since we
                        need to recharge it frequently. </p>
                </div>
            </div>

            <div class="slider-controls">
                <button onclick="prevSlide()">◀</button>
                <button onclick="nextSlide()">▶</button>
            </div>
        </div>


        <section class="content-section section-gradient" id="budget">

            <h2 class="section-title">Bill of Materials</h2>

            <div class="budget-grid">
                <div class="budget-header">Item</div>
                <div class="budget-header">Price</div>
                <div class="budget-header">Quantity</div>
                <div class="budget-header">Total Price</div>
                <div class="budget-header">Source</div>

                <div>Lipo battery</div>
                <div>$40.26</div>
                <div>1</div>
                <div>$40.26</div>
                <div>Bought</div>

                <div>Propellers (3 pairs)</div>
                <div>$30.99</div>
                <div>1</div>
                <div>$30.99</div>
                <div>Bought</div>

                <div>Controller</div>
                <div>$82.52</div>
                <div>1</div>
                <div>$82.52</div>
                <div>Bought</div>

                <div>Voltage regulator</div>
                <div>$6.99</div>
                <div>1</div>
                <div>$6.99</div>
                <div>Bought</div>

                <div>Other voltage regulator 5A rated</div>
                <div>$2.99</div>
                <div>1</div>
                <div>$2.99</div>
                <div>Bought</div>

                <div>Backup voltage regulator 3A rated</div>
                <div>$2.99</div>
                <div>1</div>
                <div>$2.99</div>
                <div>Bought</div>

                <div>SD card</div>
                <div>$6.63</div>
                <div>1</div>
                <div>$6.63</div>
                <div>Bought</div>

                <div>90A fuse</div>
                <div>$1</div>
                <div>5</div>
                <div>$5</div>
                <div>Bought</div>

                <div>CC BEC PRO Voltage Regulator</div>
                <div>$55.95</div>
                <div>1</div>
                <div>$54.95</div>
                <div>Obtained</div>

                <div>DJI E600 Motors</div>
                <div>$33.99</div>
                <div>4</div>
                <div>$132</div>
                <div>Obtained</div>

                <div>DJI E600 ESC</div>
                <div>$20</div>
                <div>4</div>
                <div>$80</div>
                <div>Obtained</div>

                <div>Power distribution board</div>
                <div>$7.99</div>
                <div>1</div>
                <div>$7.99</div>
                <div>Obtained</div>

                <div>Carbon motor mounts</div>
                <div>$13.99</div>
                <div>4</div>
                <div>$55.96</div>
                <div>Obtained</div>

                <div>Nvidia Jetson Orin Nano Super</div>
                <div>249.991</div>
                <div>1</div>
                <div>$249.991</div>
                <div>Obtained</div>

                <div>IMX219-160</div>
                <div>$19.99</div>
                <div>1</div>
                <div>$19.99</div>
                <div>Obtained</div>
            </div>
            <br>
            <br>
            <h2 class="section-title">Integration Process</h2>
            <p class="description-text"
                style="text-align: center; color: rgba(255,255,255,0.85); font-family:'Space Grotesk', sans-serif;">
                We encountered a variety of issues between designing our drone to finally getting it working. One of our
                first issues was incorrect tolerancing for the propeller mounting hub due to printing on the Stratasys
                instead of the Prusa printers. We resolved this by re-tolerancing the part and reprinting our propeller
                mounting hub. After getting the motors connected to power, we realized that the four motors did not spin
                with a consistent and equal amount of torque. During our first flight test on November 20th only three
                out of the four motors spun with enough torque to rotate the propellers. Some attempts to troubleshoot
                this issue included reworking the power delivery from the battery to the ESCs by switching wire gauges
                and how long the wires are, verifying each individual motor and ESC by creating a testing rig using XT60
                connectors, and increasing the fuse amperage from the battery from 75A fuse to a 90A. We discovered that
                we had calibrated the Pixhawk incorrectly which caused it to send unequal power to each motor as an
                attempt to balance itself. Another issue was during flight, the drone would pitch uncontrollably. This
                was resolved by switching the signal wires from each ESC to the flight controller to the correct slots,
                allowing the flight controller to accurately correct for pitching instead of trapping itself in a
                feedback loop until it crashed. After successfully getting the drone off the ground, it had an issue
                where it would yaw uncontrollably but still stabilize itself in every other direction. We had accidently
                switched motor positions for the clockwise and counterclockwise spinning which stuck the flight
                controller in another feedback loop. Once we had all motors spinning in the right direction our drone
                could successfully take off.
                <br><br>
                We had more issues integrating software. Ardupilot is very specific in what it allows the drone to do
                when. Initially, we planned on using the “GUIDED” flight mode while running autonomously. However, this
                requires a GPS to properly use, which we do not have. We then switched to the GUIDED_NOGPS mode, however
                this is incompatible with the software libraries we are using. The ALT_HOLD mode allows for the controls
                we need, however doesn’t permit altitude changes. We decided to use this as our flight mode, sacrificing
                the ability to change altitudes for more consistent tracking. This made testing autonomous flight
                difficult, as we had to test with the drone already in the air. Another issue was between the drone
                control software and the computer vision software. The drone controller initially implemented several
                pauses, and reached its commanded positions by setting the motor velocities and waiting. These pauses
                prevented the Jetson from running the computer vision protocols. We had to change from commanding
                velocities to sending messages over telemetry in order to keep the cv running smoothly, to overriding RC
                when we learned the messages were incompatible with our flight mode. We tried to avoid RC override at
                first due to the safety implications, however with our ability to easily switch fully to manual controls
                we decided it was safe to use RC override commands.
            </p>
            <br>
            <br>
            <div class="center-text">
                <a href="index.html" class="cta-button">Back to Home</a>
            </div>
        </section>
        <script type="module" src="/model.js"></script>
        <script src="slider.js"></script>
</body>

</html>
